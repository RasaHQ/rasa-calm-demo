flows:
  book_doctor_appointment:
    description: book an appointment at doctor's office
    name: book a doctor appointment
    steps:
      - collect: doctor_name
        description: a name of the doctor
      - collect: doctor_office_name
        description: the doctor's office name
      - collect: appointment_reason
        description: a medical reason for the appointment
        force_slot_filling: true
      - call: find_available_appointments

  find_available_appointments:
    description: find available appointments on the doctor's schedule
    name: find available appointments
    steps:
      - collect: appointment_time
        description: the time of the appointment
        force_slot_filling: true
      - action: action_check_appointment_availability
        next:
          - if: slots.appointment_available
            then:
              - action: utter_doctor_appointment_booked
                next: feedback_request
          - else: available_appointments_not_found
      - id: available_appointments_not_found
        action: utter_no_appointments_available
        next: END
      - id: feedback_request
        collect: feedback
        force_slot_filling: true
        ask_before_filling: true
        next: thank_you
      - id: thank_you
        action: utter_thank_you
        next: END
