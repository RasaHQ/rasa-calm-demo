flows:
  add_contact:
    description: add a contact to your contact list
    name: add a contact
    nlu_trigger:
      - intent:
          name: add_contact
          confidence_threshold: 0.9
    steps:
      - collect: add_contact_handle
        description: a user handle starting with @
        silence_timeout: 5
      - collect: add_contact_name
        description: a name of a person
        silence_timeout:
            duration: 8
      - collect: add_contact_confirmation
        ask_before_filling: true
        next:
          - if: not slots.add_contact_confirmation
            then:
              - action: utter_add_contact_cancelled
                next: END
          - else: add_contact
      - id: add_contact
        action: add_contact
        next:
          - if: "slots.return_value = 'success'"
            then:
              - action: utter_contact_added
                next: END
          - if: "slots.return_value = 'already_exists'"
            then:
              - action: utter_contact_already_exists
                next: END
          - else:
              - action: utter_add_contact_error
                next: END
