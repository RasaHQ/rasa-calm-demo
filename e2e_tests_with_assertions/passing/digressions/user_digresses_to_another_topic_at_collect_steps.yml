test_cases:
  - test_case: book_doctor_appointment_with_blocked_replace_card_flow_and_feedback_requested
    steps:
      - user: I want to book a doctor appointment
        assertions:
          - flow_started: book_doctor_appointment
          - bot_uttered:
              utter_name: utter_ask_doctor_name
      - user: Mark
        assertions:
          - slot_was_set:
              - name: doctor_name
                value: Mark
          - bot_uttered:
              utter_name: utter_ask_doctor_office_name
      - user: Hackney office
        assertions:
            - slot_was_set:
                - name: doctor_office_name
                  value: Hackney office
            - bot_uttered:
                utter_name: utter_ask_appointment_reason
      - user: persistent migraine, and I also can't find my bank card which I also have to replace now.
        assertions:
            - flow_started: find_available_appointments
            - bot_uttered:
                utter_name: utter_ask_appointment_time
      - user: Wed 9:30am
        assertions:
          - slot_was_set:
              - name: appointment_time
          - action_executed: action_check_appointment_availability
          - bot_uttered:
              utter_name: utter_doctor_appointment_booked
          - bot_uttered:
              utter_name: utter_ask_feedback
      - user: I want to skip this.
        assertions:
          - slot_was_set:
              - name: feedback
                value: I want to skip this.
          - bot_uttered:
              utter_name: utter_thank_you
          - flow_completed:
                flow_id: find_available_appointments
